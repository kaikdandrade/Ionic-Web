"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5332],{5332:(C,m,r)=>{r.r(m),r.d(m,{AddDocPageModule:()=>P});var f=r(6814),l=r(95),a=r(7852),u=r(7030),p=r(5861),o=r(9468),g=r(4073),s=r(9493),_=r(9026),h=r(553);function A(n,c){if(1&n&&o._UZ(0,"ion-img",15),2&n){const e=o.oxw(2);o.Q6J("src",e.imagem.url)}}function v(n,c){if(1&n){const e=o.EpF();o.TgZ(0,"ion-button",16),o.NdJ("click",function(){o.CHM(e);const t=o.oxw(2);return o.KtG(t.general.getPhoto(t.imagem))}),o._UZ(1,"ion-icon",17),o._uU(2," Selecionar "),o.qZA()}}function x(n,c){if(1&n){const e=o.EpF();o.TgZ(0,"ion-button",16),o.NdJ("click",function(){o.CHM(e);const t=o.oxw(2);return o.KtG(t.general.getPhoto(t.imagem))}),o._UZ(1,"ion-icon",18),o._uU(2," Alterar "),o.qZA()}}function Z(n,c){if(1&n){const e=o.EpF();o.TgZ(0,"div")(1,"p"),o._uU(2,"Preencha todos os campos abaixo para enviar um novo documento."),o.qZA(),o.TgZ(3,"p")(4,"ion-input",8),o.NdJ("ngModelChange",function(t){o.CHM(e);const d=o.oxw();return o.KtG(d.form.name=t)}),o.qZA()(),o.TgZ(5,"p")(6,"ion-input",9),o.NdJ("ngModelChange",function(t){o.CHM(e);const d=o.oxw();return o.KtG(d.form.location=t)}),o.qZA()(),o.TgZ(7,"p")(8,"ion-textarea",10),o.NdJ("ngModelChange",function(t){o.CHM(e);const d=o.oxw();return o.KtG(d.form.description=t)}),o.qZA()(),o.TgZ(9,"p"),o._uU(10,"Adicionar imagem:"),o.qZA(),o.YNc(11,A,1,1,"ion-img",11),o.YNc(12,v,3,0,"ion-button",12),o.YNc(13,x,3,0,"ion-button",12),o.TgZ(14,"p")(15,"ion-button",13),o.NdJ("click",function(){o.CHM(e);const t=o.oxw();return o.KtG(t.sendForm())}),o._UZ(16,"ion-icon",14),o._uU(17," Enviar "),o.qZA()()()}if(2&n){const e=o.oxw();o.xp6(4),o.Q6J("autofocus",!0)("ngModel",e.form.name),o.xp6(2),o.Q6J("ngModel",e.form.location),o.xp6(2),o.Q6J("autoGrow",!0)("ngModel",e.form.description),o.xp6(3),o.Q6J("ngIf",e.imagem.uploaded),o.xp6(1),o.Q6J("ngIf",!e.imagem.uploaded),o.xp6(1),o.Q6J("ngIf",e.imagem.uploaded)}}function T(n,c){if(1&n){const e=o.EpF();o.TgZ(0,"div")(1,"h4")(2,"strong"),o._uU(3,"O documento foi enviado com sucesso."),o.qZA()(),o.TgZ(4,"p")(5,"strong"),o._uU(6,"ID do formul\xe1rio cadastrado:"),o.qZA(),o._uU(7),o.qZA(),o.TgZ(8,"ion-button",19),o._UZ(9,"ion-icon",20),o._uU(10," Voltar ao \xednicio "),o.qZA(),o.TgZ(11,"ion-button",16),o.NdJ("click",function(){o.CHM(e);const t=o.oxw();return o.KtG(t.sended=!1)}),o._UZ(12,"ion-icon",21),o._uU(13," Enviar outro documento "),o.qZA()()}if(2&n){const e=o.oxw();o.xp6(7),o.hij(" ",e.idSaved,"")}}const D=[{path:"",component:(()=>{class n{constructor(){this.env=h.N,this.imagem={url:"",format:"",uploaded:!1},this.form={name:"",location:"",description:"",imagem:{url:"",name:"",format:""},date:"",status:""},this.sending=!1,this.sended=!1,this.firestore=(0,o.f3M)(g.gg),this.storage=(0,o.f3M)(s.Ke),this.general=(0,o.f3M)(_.m),this.contactsCollection=(0,g.hJ)(this.firestore,"documents")}sendForm(){var e=this;return(0,p.Z)(function*(){if(!(e.form.name.length<3||e.form.location.length<3||e.form.description.length<5||""===e.imagem.url||e.sending)){e.sending=!0;try{const i=e.general.getRandomChars(10),t=(0,s.iH)(e.storage,`${i}.${e.imagem.format}`);yield(0,s.sf)(t,e.imagem.url.split(",")[1],"base64",{contentType:`image/${e.imagem.format}`});const d=yield(0,s.Jt)((0,s.iH)(t));e.form.imagem.url=d,e.form.imagem.format=e.imagem.format,e.form.imagem.name=i,e.form.date=(new Date).toISOString().split(".")[0].replace("T"," "),e.form.status="received";const E=yield(0,g.ET)(e.contactsCollection,e.form);e.idSaved=E.id,e.sended=!0}catch(i){console.error("Opsss, deu erro",i)}finally{e.general.formValues(e.form,null),e.sending=!1}}})()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-addDoc"]],decls:16,vars:6,consts:[[3,"translucent"],["slot","start"],[1,"ion-text-center"],["name","document-text","slot","end","size","large",1,"ion-margin"],[1,"ion-padding"],[4,"ngIf"],["showBackdrop","false","message","Carregando...","spinner","circles",1,"custom-loading",3,"isOpen"],["target","_blank","title","copyright",3,"href"],["label","Nome:","type","text","name","name","label-placement","floating","fill","outline","placeholder","Nome do documento","error-text","Nome inv\xe1lido!","minlength","3","required","",3,"autofocus","ngModel","ngModelChange"],["label","Localiza\xe7\xe3o:","type","text","name","location","label-placement","floating","fill","outline","placeholder","Localiza\xe7\xe3o do documento","error-text","Localiza\xe7\xe3o inv\xe1lida!","minlength","3","maxlength","80","required","",3,"ngModel","ngModelChange"],["label","Descri\xe7\xe3o do documento:","name","description","labelPlacement","floating","fill","outline","placeholder","Descri\xe7\xe3o do documento","error-text","Descri\xe7\xe3o inv\xe1lida!","minlength","5","required","",3,"autoGrow","ngModel","ngModelChange"],["style","height: 250px;","alt","Foto carregada",3,"src",4,"ngIf"],[3,"click",4,"ngIf"],["type","submit",3,"click"],["name","send","slot","start"],["alt","Foto carregada",2,"height","250px",3,"src"],[3,"click"],["name","camera","slot","start"],["name","pencil","slot","start"],["routerLink","/home"],["name","home","slot","start"],["name","reload","slot","start"]],template:function(e,i){1&e&&(o.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),o._UZ(3,"ion-menu-button"),o.qZA(),o.TgZ(4,"ion-title",2),o._uU(5,"Novo documento"),o.qZA(),o._UZ(6,"ion-icon",3),o.qZA()(),o.TgZ(7,"ion-content",4),o.YNc(8,Z,18,8,"div",5),o.YNc(9,T,14,1,"div",5),o._UZ(10,"ion-loading",6),o.qZA(),o.TgZ(11,"ion-footer")(12,"ion-toolbar")(13,"ion-title",2)(14,"a",7),o._uU(15),o.qZA()()()()),2&e&&(o.Q6J("translucent",!0),o.xp6(8),o.Q6J("ngIf",!i.sended),o.xp6(1),o.Q6J("ngIf",i.sended),o.xp6(1),o.Q6J("isOpen",i.sending),o.xp6(4),o.Q6J("href",i.env.authorUrl,o.LSH),o.xp6(1),o.hij("\xa9 2023 ",i.env.author,"."))},dependencies:[f.O5,l.JJ,l.Q7,l.wO,l.nD,l.On,a.YG,a.Sm,a.W2,a.fr,a.Gu,a.gu,a.Xz,a.pK,a.wh,a.fG,a.g2,a.wd,a.sr,a.j9,a.YI,u.rH]}),n})()}];let M=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[u.Bz.forChild(D),u.Bz]}),n})(),P=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[f.ez,l.u5,a.Pc,M]}),n})()}}]);