"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7824],{7824:(x,l,i)=>{i.r(l),i.d(l,{CameraPageModule:()=>U});var u=i(6814),h=i(95),e=i(7852),g=i(7030),t=i(9468),m=i(8162),c=i(9493),f=i(553);function p(o,r){if(1&o){const a=t.EpF();t.TgZ(0,"div")(1,"p"),t._uU(2,"Clique no bot\xe3o para tirar uma foto:"),t.qZA(),t.TgZ(3,"ion-fab",8)(4,"ion-fab-button",9),t.NdJ("click",function(){t.CHM(a);const s=t.oxw();return t.KtG(s.getPhoto())}),t._UZ(5,"ion-icon",10),t.qZA()()()}}function v(o,r){if(1&o){const a=t.EpF();t.TgZ(0,"ion-button",14),t.NdJ("click",function(){t.CHM(a);const s=t.oxw(2);return t.KtG(s.savePhoto())}),t._UZ(1,"ion-icon",15),t._uU(2," Salvar "),t.qZA()}}function C(o,r){if(1&o){const a=t.EpF();t.TgZ(0,"div",2),t._UZ(1,"ion-img",11),t.YNc(2,v,3,0,"ion-button",12),t.TgZ(3,"ion-button",9),t.NdJ("click",function(){t.CHM(a);const s=t.oxw();return t.KtG(s.getPhoto())}),t._UZ(4,"ion-icon",13),t._uU(5," Alterar "),t.qZA()()}if(2&o){const a=t.oxw();t.xp6(1),t.Q6J("src",a.photoURL),t.xp6(1),t.Q6J("ngIf",!a.saved)}}function Z(o,r){if(1&o&&(t.TgZ(0,"div")(1,"p")(2,"strong"),t._uU(3,"URL da imagem: "),t.qZA()(),t.TgZ(4,"p"),t._uU(5),t.qZA()()),2&o){const a=t.oxw();t.xp6(5),t.Oqu(a.savedURL)}}const _=[{path:"",component:(()=>{class o{constructor(){this.env=f.N,this.photoFormat="",this.saved=!1,this.savedURL="",this.uploading=!1,this.storage=(0,t.f3M)(c.Ke)}getPhoto(){this.saved=!1,this.savedURL="",m.V1.getPhoto({quality:90,allowEditing:!0,resultType:m.dk.DataUrl}).then(a=>{console.log("Foto escolhida: ",a),this.photoURL=a.dataUrl,this.photoFormat=a.format}).catch(()=>{})}savePhoto(){if(this.uploading)return;this.uploading=!0;let a=(0,c.iH)(this.storage,`${this.getRandomChars(10)}.${this.photoFormat}`);(0,c.sf)(a,this.photoURL.split(",")[1],"base64",{contentType:`image/${this.photoFormat}`}).then(()=>{(0,c.Jt)((0,c.iH)(a)).then(n=>{alert("Imagem salva com sucesso!"),this.savedURL=n,this.saved=!0})}),this.uploading=!1}getRandomChars(a){let s="";for(let d=0;d<a;d++){const T=Math.floor(36*Math.random());s+="abcdefghijklmnopqrstuvwxyz0123456789".charAt(T)}return s}}return o.\u0275fac=function(a){return new(a||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-camera"]],decls:16,vars:6,consts:[[3,"translucent"],["slot","start"],[1,"ion-text-center"],["name","camera","slot","end","size","large",1,"ion-margin"],[1,"ion-padding"],[4,"ngIf"],["class","ion-text-center",4,"ngIf"],["target","_blank","title","copyright",3,"href"],["slot","fixed","vertical","center","horizontal","center"],[3,"click"],["name","camera"],["alt","Foto carregada",3,"src"],["color","warning",3,"click",4,"ngIf"],["slot","start","name","camera"],["color","warning",3,"click"],["name","save","slot","start"]],template:function(a,n){1&a&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),t._UZ(3,"ion-menu-button"),t.qZA(),t.TgZ(4,"ion-title",2),t._uU(5,"Tirar Foto"),t.qZA(),t._UZ(6,"ion-icon",3),t.qZA()(),t.TgZ(7,"ion-content",4),t.YNc(8,p,6,0,"div",5),t.YNc(9,C,6,2,"div",6),t.YNc(10,Z,6,1,"div",5),t.qZA(),t.TgZ(11,"ion-footer")(12,"ion-toolbar")(13,"ion-title",2)(14,"a",7),t._uU(15),t.qZA()()()()),2&a&&(t.Q6J("translucent",!0),t.xp6(8),t.Q6J("ngIf",!n.photoURL),t.xp6(1),t.Q6J("ngIf",n.photoURL),t.xp6(1),t.Q6J("ngIf",n.saved),t.xp6(4),t.Q6J("href",n.env.authorUrl,t.LSH),t.xp6(1),t.hij("\xa9 2023 ",n.env.author,"."))},dependencies:[u.O5,e.YG,e.Sm,e.W2,e.IJ,e.W4,e.fr,e.Gu,e.gu,e.Xz,e.fG,e.wd,e.sr]}),o})()}];let P=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[g.Bz.forChild(_),g.Bz]}),o})(),U=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.ez,h.u5,e.Pc,P]}),o})()}}]);